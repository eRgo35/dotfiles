#!/bin/bash

#First, configure stuff with xrandr
#Get user path
[[ $(who) != "" ]] && USER=$(who | grep :0\) | cut -f 1 -d ' ') || \
USER=$(echo /home/* | cut -f 3 -d '/')

export DISPLAY=:0.0
export XAUTHORITY=/home/$USER/.Xauthority

I=1
M=$(bspc query -M | wc -l)
if [[ "$M" == 1 ]]; then
  bspc monitor -d 1 2 3 4 5 6 7 8 9 0
elif [[ "$M" == 2 ]]; then
    bspc monitor $(bspc query -M | awk NR==1) -d 1 2 3 4 5
    bspc monitor $(bspc query -M | awk NR==2) -d 6 7 8 9 0
elif [[ "$M" == 3 ]]; then
    bspc monitor $(bspc query -M | awk NR==2) -d 1 2 3 4 5
    bspc monitor $(bspc query -M | awk NR==3) -d 6 7 8 9 10
    bspc monitor $(bspc query -M | awk NR==1) -d 11 12 13 14 15
elif [[ "$M" == 4 ]]; then
    bspc monitor $(bspc query -M | awk NR==1) -d a b c d e 
    bspc monitor $(bspc query -M | awk NR==2) -d f g h i j
    bspc monitor $(bspc query -M | awk NR==3) -d k l m n o
    bspc monitor $(bspc query -M | awk NR==4) -d p q r s t 
elif [[ "$M" == 5 ]]; then
    bspc monitor $(bspc query -M | awk NR==1) -d a b c d e 
    bspc monitor $(bspc query -M | awk NR==2) -d f g h i j
    bspc monitor $(bspc query -M | awk NR==3) -d k l m n o
    bspc monitor $(bspc query -M | awk NR==4) -d p q r s t 
    bspc monitor $(bspc query -M | awk NR==5) -d u v w x y
else
  for monitor in $(bspc query -M); do
  bspc monitor $monitor \
      -n "$I" \
      -d $I/{a,b,c}
    let I++
    done
fi

##Polybar launch
 /home/$USER/.dotfiles/polybar/.config/polybar/launch.sh &

##Set wallpaper
 /home/$USER/.fehbg