#!/bin/bash

#First, configure stuff with xrandr
#Get user path
[[ $(who) != "" ]] && USER=$(who | grep :0\) | cut -f 1 -d ' ') || \
USER=$(echo /home/* | cut -f 3 -d '/')

export DISPLAY=:0.0
export XAUTHORITY=/home/$USER/.Xauthority

I=1
M=$(bspc query -M | wc -l)
if [[ "$M" == 1 ]]; then
  bspc monitor -d • • • • • • • • • •
elif [[ "$M" == 2 ]]; then
    bspc monitor $(bspc query -M | awk NR==1) -d • • • • •
    bspc monitor $(bspc query -M | awk NR==2) -d • • • • •
elif [[ "$M" == 3 ]]; then
    bspc monitor $(bspc query -M | awk NR==1) -d • • • •
    bspc monitor $(bspc query -M | awk NR==2) -d • • •
    bspc monitor $(bspc query -M | awk NR==3) -d • • •
elif [[ "$M" == 4 ]]; then
    bspc monitor $(bspc query -M | awk NR==1) -d • • 
    bspc monitor $(bspc query -M | awk NR==2) -d • • •
    bspc monitor $(bspc query -M | awk NR==3) -d • • •
    bspc monitor $(bspc query -M | awk NR==4) -d • • 
elif [[ "$M" == 5 ]]; then
    bspc monitor $(bspc query -M | awk NR==1) -d • •
    bspc monitor $(bspc query -M | awk NR==2) -d • •
    bspc monitor $(bspc query -M | awk NR==3) -d • •
    bspc monitor $(bspc query -M | awk NR==4) -d • •
    bspc monitor $(bspc query -M | awk NR==5) -d • •
else
  for monitor in $(bspc query -M); do
  bspc monitor $monitor \
      -n "$I" \
      -d $I/{a,b,c}
    let I++
    done
fi

##Polybar launch
 /home/$USER/.dotfiles/polybar/.config/polybar/launch.sh &

##Set wallpaper
 /home/$USER/.fehbg